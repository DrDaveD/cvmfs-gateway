{erl_opts, [debug_info]}.
{deps, [
        {lager, "3.2.1"},
        {cowboy, {git, "https://github.com/ninenines/cowboy.git", {tag, "2.0.0-pre.7"}}},
        {jsx, "2.8.0"},
        {uuid, "1.6.0", {pkg, uuid_erl}},
        {poolboy, "1.5.1"},
        {lager_syslog, {git, "https://github.com/basho/lager_syslog.git", {tag, "3.0.3"}}}
       ]}.
{relx, [{release, {cvmfs_services, "0.1.0"}
        ,[cvmfs_services,
          mnesia,
          lager,
          lager_syslog,
          cowboy,
          jsx,
          poolboy,
          uuid,
          runtime_tools,
          sasl]}

       ,{sys_config, "./config/sys.config.rel"}
       ,{vm_args, "./config/vm.args"}

       ,{overlay, [{mkdir, "etc"}
                  ,{mkdir, "log"}
                  ,{copy, "./config/repo.config", "etc/repo.config"}
                  ,{copy, "./scripts/90-cvmfs_services.conf", "scripts/90-cvmfs_services.conf"}
                  ,{copy, "./scripts/setup.sh", "scripts/setup.sh"}
                  ,{copy, "./scripts/setup_mnesia.escript", "scripts/setup_mnesia.escript"}]}

       ,{dev_mode, true}
       ,{include_erts, false}
       ,{system_libs, false}

       ,{extended_start_script, true}]}.

{ct_opts, [{config, ["./config/ct_repo.config"]}]}.

{profiles, [{prod, [{relx, [{dev_mode, false}
                           ,{include_erts, true}
                           ,{system_libs, true}]}]}
           ,{test, [{deps, [
                            {proper, "1.1.1-beta"},
                            {gun, "1.0.0-pre.1"},
                            {macaroons, "1.0.2", {git, "https://github.com/kzemek/macaroons.git", {tag, "1.0.2"}}}
                           ]}]}]}.

